<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wardrobe Optimizer</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .calculator-card { background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); width: 400px; }
        h2 { margin-top: 0; color: #2c3e50; text-align: center; }
        
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 8px; color: #7f8c8d; text-transform: uppercase; letter-spacing: 0.5px; }
        
        .row { display: flex; gap: 10px; }
        select, input { flex: 1; padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px; font-size: 1rem; width: 100%; box-sizing: border-box; transition: border 0.2s; }
        select:focus, input:focus { border-color: #3498db; outline: none; }
        
        button { width: 100%; padding: 14px; background: #3498db; color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: bold; cursor: pointer; margin-top: 10px; transition: transform 0.1s; }
        button:hover { background: #2980b9; }
        button:active { transform: scale(0.98); }

        /* Comparison Table Styles */
        .comparison-box { margin-top: 25px; display: none; }
        .stat-card { background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 5px solid #bdc3c7; }
        .stat-card.winner { background: #e8f8f5; border-left-color: #2ecc71; }
        .stat-card.expensive { background: #fef5e7; border-left-color: #f39c12; }
        
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .card-title { font-weight: bold; font-size: 0.9rem; color: #2c3e50; }
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; }
        .badge-green { background: #d4efdf; color: #27ae60; }
        .badge-orange { background: #fdebd0; color: #d35400; }

        .big-number { font-size: 1.4rem; font-weight: bold; margin-bottom: 2px; }
        .details { font-size: 0.85rem; color: #7f8c8d; }
    </style>
</head>
<body>

<div class="calculator-card">
    <h2>ðŸ‘” Wardrobe Math</h2>
    
    <div class="input-group">
        <label>1. How many Categories?</label>
        <input type="number" id="numCategories" value="3" min="1" placeholder="e.g. 3 (Shirt, Pant, Sock)">
    </div>

    <div class="input-group">
        <label>2. How many Days?</label>
        <div class="row">
            <select id="presetRange" onchange="updateDays()">
                <option value="" disabled>Presets...</option>
                <option value="30">Month</option>
                <option value="365" selected>Year</option>
                <option value="366">Leap Year</option>
                <option value="29200">Lifetime</option>
            </select>
            <input type="number" id="targetDays" value="365" placeholder="Days">
        </div>
    </div>

    <button onclick="calculate()">Compare Strategies</button>

    <div id="comparison" class="comparison-box">
        <div class="stat-card expensive">
            <div class="card-header">
                <span class="card-title">THE "EXACT" WAY</span>
                <span class="badge badge-orange">Rigid</span>
            </div>
            <div class="big-number"><span id="exactSum">--</span> Items</div>
            <div class="details">To hit exactly <span id="exactTarget">--</span> days</div>
            <div class="details" style="margin-top:5px; font-family:monospace" id="exactSplit">--</div>
        </div>

        <div class="stat-card winner">
            <div class="card-header">
                <span class="card-title">THE OPTIMIZED WAY</span>
                <span class="badge badge-green">Recommended</span>
            </div>
            <div class="big-number"><span id="optSum">--</span> Items</div>
            <div class="details">Gives you <span id="optOutfits">--</span> days (<span id="bonusDays">+0</span> bonus)</div>
            <div class="details" style="margin-top:5px; font-family:monospace" id="optSplit">--</div>
        </div>
    </div>
</div>

<script>
    function updateDays() {
        document.getElementById("targetDays").value = document.getElementById("presetRange").value;
    }

    function calculate() {
        let cats = Number(document.getElementById("numCategories").value);
        let target = Number(document.getElementById("targetDays").value);
        
        if(cats < 1 || target < 1) return alert("Please enter valid numbers");

        // --- STRATEGY 1: EXACT TARGET (Prime Factorization) ---
        let exactStats = getExactStats(target, cats);

        // --- STRATEGY 2: OPTIMIZED (The "Square/Cube" Method) ---
        let optStats = getOptimizedStats(target, cats);

        // --- RENDER RESULTS ---
        document.getElementById("comparison").style.display = "block";
        
        // Render Exact
        document.getElementById("exactSum").innerText = exactStats.sum;
        document.getElementById("exactTarget").innerText = target;
        document.getElementById("exactSplit").innerText = "Split: " + exactStats.split.join(" Ã— ");

        // Render Optimized
        document.getElementById("optSum").innerText = optStats.sum;
        document.getElementById("optOutfits").innerText = optStats.outfits;
        document.getElementById("bonusDays").innerText = "+" + (optStats.outfits - target);
        document.getElementById("optSplit").innerText = "Split: " + optStats.split.join(" Ã— ");
    }

    // --- LOGIC: Optimization (Climbing Method) ---
    function getOptimizedStats(target, cats) {
        let base = Math.floor(target ** (1/cats));
        let wardrobe = new Array(cats).fill(base); // e.g. [7, 7, 7]
        
        // Add items until we pass the target
        while (getProduct(wardrobe) < target) {
            let smallestIdx = wardrobe.indexOf(Math.min(...wardrobe));
            wardrobe[smallestIdx]++;
        }
        return { split: wardrobe, sum: getSum(wardrobe), outfits: getProduct(wardrobe) };
    }

    // --- LOGIC: Exact Target (Prime Factorization) ---
    function getExactStats(num, cats) {
        let factors = getPrimeFactors(num);
        // Start with 1 item in each category
        let buckets = new Array(cats).fill(1);
        
        // Greedy Algorithm: Multiply largest factors into smallest buckets to keep them balanced
        // 1. Sort factors largest to smallest (e.g. 61, 3, 2)
        factors.sort((a,b) => b - a);
        
        // 2. Distribute
        factors.forEach(factor => {
            // Find the bucket with the currently smallest product
            let minBucketIdx = buckets.indexOf(Math.min(...buckets));
            buckets[minBucketIdx] *= factor;
        });

        return { split: buckets, sum: getSum(buckets) };
    }

    // Helper: Find all prime factors of a number (e.g. 366 -> [2, 3, 61])
    function getPrimeFactors(n) {
        const factors = [];
        let divisor = 2;
        while (n >= 2) {
            if (n % divisor === 0) {
                factors.push(divisor);
                n = n / divisor;
            } else {
                divisor++;
            }
        }
        return factors;
    }

    function getProduct(arr) { return arr.reduce((a, b) => a * b, 1); }
    function getSum(arr) { return arr.reduce((a, b) => a + b, 0); }
</script>

</body>
</html>